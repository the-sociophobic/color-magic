{"version":3,"sources":["libs/three/Unit.js","libs/three/handlers/transitionHandler/timingFunctions.js","libs/three/Scene.js","libs/three/handlers/transitionHandler/index.js","components/ThreeScene.js","libs/three/modelLoader.js","libs/three/units/Model.js","libs/three/units/transitionHandler/timingFunctions.js","libs/utils/tapEvent.js","libs/three/units/Room.js","libs/three/units/transitionHandler/index.js","libs/three/units/Lights.js","models/scene.glb","components/MainScene.js","App.js","serviceWorker.js","index.js"],"names":["Unit","props","init","animate","frame","dispose","this","fns","t","k","easeIn","easeOut","easeInOut","maxFrameNumber","Scene","ViewerDiv","W","clientWidth","H","clientHeight","optimise","scene","renderer","THREE","antialias","alpha","setClearColor","setSize","setPixelRatio","window","devicePixelRatio","shadowMap","enabled","type","appendChild","domElement","camera","controls","OrbitControls","position","z","update","interaction","Interaction","initUnits","frameId","requestAnimationFrame","disposeUnits","cancelAnimationFrame","resize","aspect","updateProjectionMatrix","frameNumber","getBoundingClientRect","left","right","top","bottom","composer","units","clock","Object","keys","forEach","unitName","input","Controls","react","render","unit","disabled","unitsToggled","args","children","length","remove","toggleUnits","undefined","animateTransitions","unregisteredTransitions","transitions","transition","currentFrame","numberOfFrames","push","timingFuntion","timingFuntions","variable","copy","initialValue","clone","lerp","value","transitionToUnregister","onComplete","unregisterTransition","id","registerTransition","currentId","Number","MAX_SAFE_INTEGER","transitionId","transitionIndex","map","indexOf","splice","unregisterAllTransitions","noActiveTransitions","ThreeScene","componentWillUnmount","className","ref","viewerRef","state","React","createRef","openDoor","data","console","log","resizeObs","ResizeObserver","bind","observe","current","Component","model","a","Promise","res","rej","GLTFLoader","load","gltf","progress","loaded","total","error","Model","loadModel","_this","modelLoader","file","gtlf","add","onLoad","element","fn","timer","vector","startEvent","endEvent","ms","touchStarted","registerTapHandler","e","global","setTimeout","unregisterTapHandler","clearTimeout","tapHandler","sub","on","setQuaternion","angle","setFromAxisAngle","Math","PI","initialAngles","Room","rotateDoor","doorsTransitionIds","index","doors","quaternion","frames","setInitialRotationDoor","onMouseOverDoor","onMouseOutDoor","clickDoor","scale","multiplyScalar","rotation","y","room","walls","logo","castShadow","receiveShadow","slice","door","unshift","cursor","tapEvent","classes","slerp","color","x","Lowpoly","light0","HemisphereLight","set","lights","lightData","SpotLight","light","decay","shadow","mapSize","width","height","near","far","MainScene","head","Lights","App","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.dc7f756d.chunk.js","sourcesContent":["export default class Unit {\n  constructor(props) { this.props = props }\n  init = () => {}\n  animate = frame => {}\n  dispose = () => {}\n}","let fns = {}\n\nfns.linear = t => t\nfns.easeInQuad = t => t * t\nfns.easeOutQuad = t => t * (2 - t)\nfns.easeInOutQuad = t => t < .5 ? 2 * (t ** 2) : -1 + (4 - 2 * t) * t\nfns.easeInCubic = t => t * t * t\nfns.easeOutCubic = t => (--t) * t * t + 1\nfns.easeInOutCubic = t => t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1\nfns.easeInQuart = t => t * t * t * t\nfns.easeOutQuart = t => 1-(--t) * t * t * t\nfns.easeInOutQuart = t => t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t\nfns.easeInQuint = t => t * t * t * t * t\nfns.easeOutQuint = t => 1 + (--t) * t * t * t * t\nfns.easeInOutQuint = t => t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\n\nfns.easeIn = (t, k) => (t ** k)\nfns.easeOut = (t, k) => 1 - fns.easeIn(1 - t, k)\nfns.easeInOut = (t, k) => t < .5 ?\n  fns.easeIn(t * 2, k) / 2\n  :\n  1 - fns.easeIn((1 - t) * 2, k) / 2\n\nfns.easeIn2 = t => fns.easeIn(t, 1.5)\nfns.easeOut2 = t => fns.easeOut(t, 1.5)\nfns.easeInOut2 = t => fns.easeInOut(t, 1.5)\n\n\nexport default fns","import * as THREE from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\n// import { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\n// import { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\n// import { EffectComposer, RenderPass } from 'postprocessing'\nimport { Interaction } from 'three.interaction'\n\nimport transitionHandler from './handlers/transitionHandler'\n\n\nconst targetToCamera = -25\nconst maxFrameNumber = 5000\n\n\nexport default class Scene extends transitionHandler {\n\n  constructor(props) {\n    super(props)\n    this.scene = {\n      renderer: undefined,\n      camera: undefined,\n      scene: new THREE.Scene(),\n      composer: undefined,\n      controls: undefined,\n      interaction: undefined,\n    \n      clock: new THREE.Clock(),\n      frameNumber: 0,\n    \n      units: {},\n      unitsToggled: false,\n\n      react: props.react,\n    }\n  }\n\n  init = ViewerDiv => {\n    const W = ViewerDiv.clientWidth\n    const H = ViewerDiv.clientHeight\n\n    //ADD RENDERER\n    const optimise = W > 1200\n    this.scene.renderer = new THREE.WebGLRenderer({ antialias: !optimise, alpha: true })\n    this.scene.renderer.setClearColor(0x000000, 0)\n    this.scene.renderer.setSize(W, H)\n    // this.scene.renderer.setPixelRatio(!optimise ? window.devicePixelRatio : 1)\n    this.scene.renderer.setPixelRatio(window.devicePixelRatio)\n    this.scene.renderer.shadowMap.enabled = true\n    this.scene.renderer.shadowMap.type = THREE.PCFSoftShadowMap\n    \n    ViewerDiv.appendChild(this.scene.renderer.domElement)\n\n    //ADD CAMERA\n    this.scene.camera = new THREE.PerspectiveCamera(\n      75,\n      W / H,\n      0.1,\n      1000\n    )\n    this.scene.controls = new OrbitControls(this.scene.camera, this.scene.renderer.domElement)\n    this.scene.controls.enabled = false\n    this.scene.camera.position.z = targetToCamera\n    this.scene.controls.update()\n\n    this.scene.interaction = new Interaction(this.scene.renderer, this.scene.scene, this.scene.camera)\n\n    // this.scene.composer = new EffectComposer(this.scene.renderer)\n    // this.scene.composer.addPass(new RenderPass(this.scene.scene, this.scene.camera))\n\n    this.initUnits()\n\n    if (!this.frameId)\n      this.frameId = requestAnimationFrame(this.animate)\n  }\n\n  dispose = () => {\n    this.disposeUnits()\n    cancelAnimationFrame(this.frameId)\n  }\n\n  resize = (W, H) => {\n    if (!this.scene.renderer || !this.scene.camera)\n      return\n\n    // const optimise = W > 1200\n\n    this.scene.camera.aspect = W / H\n    this.scene.camera.updateProjectionMatrix()\n\n    this.scene.renderer.setSize(W, H)\n    // this.scene.renderer.setPixelRatio(!optimise ? window.devicePixelRatio : 1)\n    this.scene.renderer.setPixelRatio(window.devicePixelRatio)\n  }\n\n  animate = () => {\n    this.scene.frameNumber = (this.scene.frameNumber + 1) % maxFrameNumber\n\n    const { left, right, top, bottom } = this.scene.renderer.domElement.getBoundingClientRect()\n \n    const isOffscreen =\n      bottom < 0 ||\n      top > this.scene.renderer.domElement.clientHeight ||\n      right < 0 ||\n      left > this.scene.renderer.domElement.clientWidth\n  \n    if (!isOffscreen || true) {\n      const {\n        composer,\n        controls,\n        units,\n        clock,\n        renderer\n      } = this.scene\n  \n      Object.keys(units)\n        .forEach(unitName =>\n          units[unitName].animate({\n            THREE: THREE,\n            ...this.scene,\n            input: this.scene.units.Controls,\n            maxFrameNumber: maxFrameNumber,\n            react: this.props.react,\n          }))\n  \n      controls.update()\n      // composer.render()\n      // composer.render(clock.getDelta())\n      renderer.render(this.scene.scene, this.scene.camera)\n    }\n\n    this.frameId = window.requestAnimationFrame(this.animate)\n  }\n\n\n  initUnits = () => {\n    const props = {\n      THREE: THREE,\n      ...this.scene,\n      input: this.scene.units.Controls,\n      maxFrameNumber: maxFrameNumber,\n      react: this.props.react,\n    }\n\n    Object.keys(this.props.units)\n      .forEach(unitName => {\n        const unit = this.props.units[unitName]\n\n        if (!unit.disabled ^ this.scene.unitsToggled) {\n          this.scene.units[unitName] = new unit.unit({...props, ...unit.args})\n          this.scene.units[unitName].init &&\n            this.scene.units[unitName].init()\n        }\n      })\n  }\n\n  disposeUnits = () => {\n    const {\n      scene,\n      units,\n    } = this.scene\n\n    Object.keys(units)\n      .forEach(unitName => units[unitName].dispose())\n\n    //REDO THIS SHIT: units should unregister themselves\n    while(scene.children.length > 0)\n      scene.remove(scene.children[0])\n  }\n\n  toggleUnits = () => {\n    this.disposeUnits()\n    this.scene.unitsToggled = !this.scene.unitsToggled\n    this.initUnits()\n  }\n\n  // toggleUnit = unitName => {\n  //   // if (this.scene[unitName].enabled)\n  //   console.log(this.scene.scene.children)\n  // }\n}\n","import Unit from 'libs/three/Unit'\n\nimport timingFuntions from './timingFunctions'\n\nexport default class TransitionsHandler extends Unit {\n  constructor(props) {\n    super(props)\n    this.transitions = []\n    this.currentId = 0\n  }\n\n  animateTransitions = () => {\n    let unregisteredTransitions = []\n\n    this.transitions.forEach(transition => {\n      if (transition.currentFrame >= transition.numberOfFrames)\n        unregisteredTransitions.push(transition)\n      else {\n        // const alpha = 1 / (transition.numberOfFrames - transition.currentFrame)\n        const alpha = transition.currentFrame / transition.numberOfFrames\n        const timingFuntion = timingFuntions[transition.timingFuntion] || (t => t)\n\n        transition.variable.copy(transition.initialValue\n          .clone()\n          .lerp(transition.value, timingFuntion(alpha)))\n\n        transition.currentFrame++\n      }\n    })\n\n    unregisteredTransitions.forEach(transitionToUnregister => {\n      transitionToUnregister.onComplete && transitionToUnregister.onComplete()\n      this.unregisterTransition(transitionToUnregister.id)\n    })\n  }\n\n  registerTransition = props => {\n    this.transitions.push({\n      id: this.currentId = (this.currentId + 1) % Number.MAX_SAFE_INTEGER,\n      variable: props.variable,\n      value: props.value.clone(),\n      initialValue: props.variable.clone(),\n      numberOfFrames: props.numberOfFrames || 10,\n      currentFrame: 0,\n      timingFuntion: props.timingFuntion || \"none\",\n      onComplete: props.onComplete || (() => {}),\n    })\n\n    return this.currentId\n  }\n\n  unregisterTransition = transitionId => {\n    const transitionIndex = this.transitions\n      .map(transition => transition.id)\n      .indexOf(transitionId)\n\n    if (transitionIndex !== -1)\n      this.transitions.splice(transitionIndex, 1)\n  }\n\n  unregisterAllTransitions = () => this.transitions.length = 0\n\n  noActiveTransitions = () => this.transitions.length === 0\n\n}","import React, { useRef } from 'react'\n\nimport ResizeObserver from 'resize-observer-polyfill'\n\nimport Scene from 'libs/three/Scene'\n\n\nexport default class ThreeScene extends React.Component {\n  constructor(props) {\n    super(props)\n    \n    this.state = {}\n\n    this.viewerRef = new React.createRef()\n\n    this.scene = new Scene({\n      react: {\n        openDoor: data => console.log(\"data\")\n      },\n      units: props.units,\n    })\n  }\n\n  componentDidMount() {\n    this.resizeObs = new ResizeObserver(this.resize.bind(this))\n      .observe(this.viewerRef.current)\n\n    this.scene.init(this.viewerRef.current)\n  }\n\n  componentWillUnmount = () => {\n    this.scene.dispose()\n    // this.viewerRef.removeChild(this.renderer.domElement)\n  }\n\n  resize() {\n    const ViewerDiv = this.viewerRef.current\n    \n    if (!ViewerDiv)\n      return\n\n    this.scene.resize(ViewerDiv.clientWidth, ViewerDiv.clientHeight)\n  }\n\n  render = () =>\n    <div\n      className=\"Viewer\"\n      ref={this.viewerRef}\n    >\n    </div>\n}\n","import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\n\n\nexport default async model =>\n  new Promise((res, rej) =>\n    new GLTFLoader()\n      .load(\n        model,\n        gltf =>\n          res(gltf),\n        progress =>\n          console.log((progress.loaded / progress.total * 100) + '% loaded'),\n        error =>\n          rej(error),\n      )\n  )\n","import * as THREE from 'three'\nimport Unit from 'libs/three/Unit'\n\nimport modelLoader from 'libs/three/modelLoader'\n\n\nexport default class Model extends Unit {\n  constructor(props) {\n    super(props)\n\n    // this.loadModel()\n  }\n\n  loadModel = async _this => {\n    _this.gtlf = await modelLoader(_this.props.file)\n    _this.scene = _this.gtlf.scene\n    // console.log(_this)\n    // _this.scene.castShadow = true\n    // _this.scene.receiveShadow = true\n\n    _this.props.scene.add(_this.scene)\n\n    _this.onLoad && _this.onLoad()\n  }\n\n  animate = props => {\n    // let alpha = props.frameNumber / props.maxFrameNumber * 7\n\n    // this.scene && (this.scene.rotation.y = alpha * 2 * Math.PI)\n  }\n  dispose = props => {}\n}","let fns = {}\n\nfns.linear = t => t\nfns.easeInQuad = t => t * t\nfns.easeOutQuad = t => t * (2 - t)\nfns.easeInOutQuad = t => t < .5 ? 2 * (t ** 2) : -1 + (4 - 2 * t) * t\nfns.easeInCubic = t => t * t * t\nfns.easeOutCubic = t => (--t) * t * t + 1\nfns.easeInOutCubic = t => t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1\nfns.easeInQuart = t => t * t * t * t\nfns.easeOutQuart = t => 1-(--t) * t * t * t\nfns.easeInOutQuart = t => t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t\nfns.easeInQuint = t => t * t * t * t * t\nfns.easeOutQuint = t => 1 + (--t) * t * t * t * t\nfns.easeInOutQuint = t => t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\n\nfns.easeIn = (t, k) => (t ** k)\nfns.easeOut = (t, k) => 1 - fns.easeIn(1 - t, k)\nfns.easeInOut = (t, k) => t < .5 ?\n  fns.easeIn(t * 2, k) / 2\n  :\n  1 - fns.easeIn((1 - t) * 2, k) / 2\n\nfns.easeIn2 = t => fns.easeIn(t, 1.5)\nfns.easeOut2 = t => fns.easeOut(t, 1.5)\nfns.easeInOut2 = t => fns.easeInOut(t, 1.5)\n\n\nexport default fns","export default (element, fn, startEvent = 'touchstart', endEvent = 'touchend', ms = 200) => {\n  var timer,\n    touchStarted = false,\n    // spriteUUID,\n    vector\n\n  const registerTapHandler = e => {\n    // spriteUUID = e.intersects[0].object.uuid\n    vector = e.data.global.clone()\n    timer = setTimeout(() => unregisterTapHandler(), ms)\n    touchStarted = true\n  }\n\n  const unregisterTapHandler = () => {\n    touchStarted = false\n    clearTimeout(timer)\n  }\n\n  const tapHandler = e => {\n    if (touchStarted && vector && (vector.sub(e.data.global).length() < 0.001)) {\n      fn()\n    }\n    unregisterTapHandler()\n  }\n\n  element.on(startEvent, registerTapHandler)\n  element.on(endEvent, tapHandler)\n}","import * as THREE from 'three'\nimport classes from 'multiple-extend'\n\nimport Model from 'libs/three/units/Model'\nimport transitionHandler from 'libs/three/units/transitionHandler'\nimport tapEvent from 'libs/utils/tapEvent'\n\n\nconst degToRad = deg =>\n  deg / 180 * Math.PI\n\nconst setQuaternion = angle => {\n  let res = new THREE.Quaternion()\n\n  res.setFromAxisAngle( new THREE.Vector3( 0, 1, 0 ), degToRad(angle) )\n\n  return res\n}\n\nconst initialAngles = [48, 18, -18, -48]\n\n\nexport default class Room extends classes(Model, transitionHandler) {\n  constructor(props) {\n    super(props)\n    this.loadModel(this)\n  }\n\n  rotateDoor = props => {\n    if (this.doorsTransitionIds[props.index] !== -1) {\n      this.unregisterTransition(this.doorsTransitionIds[props.index])\n      this.doorsTransitionIds[props.index] = -1\n    }\n\n    this.doorsTransitionIds[props.index] = this.registerTransition({\n      variable: this.doors[props.index].quaternion,\n      value: setQuaternion(props.angle),\n      numberOfFrames: props.frames,\n      timingFuntion: 'easeOutQuad',\n      onComplete: props.onComplete,\n    })\n  }\n\n  setInitialRotationDoor = index => {\n    this.doors[index]\n      .quaternion\n      .copy(setQuaternion(initialAngles[index]))\n\n    this.rotateDoor({\n      index: index,\n      angle: initialAngles[index] + (index > 1 ? 22 : -22),\n      frames: 200,\n    })\n  }\n\n  onMouseOverDoor = index =>\n    this.rotateDoor({\n      index: index,\n      angle: initialAngles[index] + (index > 1 ? 44 : -44),\n      frames: 50\n    })\n\n  onMouseOutDoor = index =>\n    this.rotateDoor({\n      index: index,\n      angle: initialAngles[index] + (index > 1 ? 22 : -22),\n      frames: 30\n    })\n\n  clickDoor = (index, props) =>\n    this.rotateDoor({\n      index: index,\n      angle: initialAngles[index] + (index > 1 ? 70 : -70),\n      frames: 70,\n      onComplete: props.react.openDoor(index)\n    })\n\n\n  onLoad = () => {\n    this.scene.scale.multiplyScalar(5.5)\n    this.scene.position.add(new THREE.Vector3(0, -15, 20))\n    this.scene.rotation.y += Math.PI\n\n    this.room = this.scene.children[0]\n    this.walls = this.scene.children[1]\n    this.logo = this.scene.children[2]\n\n    // this.room.visible = false\n    this.room.castShadow = true\n    this.room.receiveShadow = true\n    this.walls.castShadow = true\n    this.walls.receiveShadow = true\n\n    this.doors = []\n    this.doorsTransitionIds = [-1, -1, -1, -1]\n\n    this.scene.children\n      .slice(3)\n      .forEach(door =>\n        this.doors.unshift(door))\n\n    this.doors\n      .forEach((door, index) => {\n        this.setInitialRotationDoor(index)\n\n        door.castShadow = true\n        door.receiveShadow = true\n\n        door.cursor = 'pointer'\n        tapEvent(door, () => this.clickDoor(index, this.props))\n        tapEvent(door, () => this.clickDoor(index, this.props), 'mousedown', 'mouseup')\n        door.on('mouseover', () => this.onMouseOverDoor(index))\n        door.on('mouseout', () => this.onMouseOutDoor(index))\n      })\n  }\n\n  animate = props => {\n    this.animateTransitions()\n\n    // let alpha = props.frameNumber / props.maxFrameNumber * 7\n\n    // this.scene && (this.scene.rotation.y = alpha * 2 * Math.PI)\n  }\n  dispose = props => {}\n}","import Unit from 'libs/three/Unit'\n\nimport timingFuntions from './timingFunctions'\n\n// export default class TransitionsHandler extends Unit {\nexport default class TransitionsHandler {\n  constructor(props) {\n    // super(props)\n    this.transitions = []\n    this.currentId = 0\n  }\n\n  animateTransitions = () => {\n    let unregisteredTransitions = []\n\n    this.transitions.forEach(transition => {\n      if (transition.currentFrame >= transition.numberOfFrames)\n        unregisteredTransitions.push(transition)\n      else {\n        // const alpha = 1 / (transition.numberOfFrames - transition.currentFrame)\n        const alpha = transition.currentFrame / transition.numberOfFrames\n        const timingFuntion = timingFuntions[transition.timingFuntion] || (t => t)\n\n        if (transition.variable.slerp)\n          transition.variable.copy(transition.initialValue\n            .clone()\n            .slerp(transition.value, timingFuntion(alpha)))\n        else\n          transition.variable.copy(transition.initialValue\n            .clone()\n            .lerp(transition.value, timingFuntion(alpha)))\n\n        transition.currentFrame++\n      }\n    })\n\n    unregisteredTransitions.forEach(transitionToUnregister => {\n      transitionToUnregister.onComplete && transitionToUnregister.onComplete()\n      this.unregisterTransition(transitionToUnregister.id)\n    })\n  }\n\n  registerTransition = props => {\n    this.transitions.push({\n      id: this.currentId = (this.currentId + 1) % Number.MAX_SAFE_INTEGER,\n      variable: props.variable,\n      value: props.value.clone(),\n      initialValue: props.variable.clone(),\n      numberOfFrames: props.numberOfFrames || 10,\n      currentFrame: 0,\n      timingFuntion: props.timingFuntion || \"none\",\n      onComplete: props.onComplete || (() => {}),\n    })\n\n    return this.currentId\n  }\n\n  unregisterTransition = transitionId => {\n    const transitionIndex = this.transitions\n      .map(transition => transition.id)\n      .indexOf(transitionId)\n\n    if (transitionIndex !== -1)\n      this.transitions.splice(transitionIndex, 1)\n  }\n\n  unregisterAllTransitions = () => this.transitions.length = 0\n\n  noActiveTransitions = () => this.transitions.length === 0\n\n}","import Unit from 'libs/three/Unit'\n\n\nconst data = [\n  { color: 0x0000ff, x:  23, z: 13.8 },\n  { color: 0x00ff00, x:  11, z: 25 },\n  { color: 0xaa0055, x: -11, z: 25 },\n  { color: 0xaaaa00, x: -23, z: 13.8 },\n]\n\n\nexport default class Lowpoly extends Unit {\n  constructor(props) {\n    super(props)\n\n    const { scene, THREE } = props\n\n    this.light0 = new THREE.HemisphereLight( 0xffffff, 0x444444, 1.35 )\n    this.light0.position.set(0, 3, 0)\n    scene.add( this.light0 )\n\n    this.lights = []\n\n    data.forEach((lightData, index) => {\n      this.lights.push(new THREE.SpotLight( lightData.color, 0xffffff, 35 ))\n\n      const light = this.lights[index]\n\n      light.position.set( lightData.x, -12.5, lightData.z )\n      light.castShadow = true\n      light.decay = 12\n      scene.add( light )\n  \n      light.shadow.mapSize.width = 512 // default\n      light.shadow.mapSize.height = 512 // default\n      light.shadow.camera.near = 0.5 // default\n      light.shadow.camera.far = 500 // default\n    })\n  }\n\n  animate = props => {}\n  dispose = () => {}\n}\n","export default __webpack_public_path__ + \"static/media/scene.8a53f2ea.glb\";","import React from 'react'\n\nimport ThreeScene from 'components/ThreeScene'\nimport Room from 'libs/three/units/Room'\nimport Lights from 'libs/three/units/Lights'\n\nimport scene from 'models/scene.glb'\n\n\nexport default class MainScene extends React.Component {  \n  render = () =>\n    <ThreeScene\n      id=\"sceneClosed\"\n      units={{\n        head: {\n          unit: Room,\n          args: { file: scene },\n          disabled: false,\n        },\n        lights: {\n          unit: Lights,\n          disabled: false,\n        }\n      }}\n    />\n}","import React from 'react'\nimport Div100vh from 'react-div-100vh'\n\nimport MainScene from 'components/MainScene'\n\nimport 'styles/index.sass'\n\n\nclass App extends React.Component {\n  state = {}\n\n  render = () =>\n    <Div100vh>\n      <div className=\"App\">\n        <MainScene />\n      </div>\n    </Div100vh>\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}