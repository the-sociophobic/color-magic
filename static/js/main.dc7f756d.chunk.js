(this["webpackJsonpcolor-magic"]=this["webpackJsonpcolor-magic"]||[]).push([[0],{45:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var r=t(8),i=t(6),o=t.n(i),a=t(19),s=t.n(a),c=t(1),u=t(2),l=t(3),f=t(20),d=t(4),m=t(21),h=t(10),p=t(0),b=t(22),v=t(23),O=function e(n){Object(c.a)(this,e),this.init=function(){},this.animate=function(e){},this.dispose=function(){},this.props=n},g={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*Math.pow(e,2):(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeIn:function(e,n){return Math.pow(e,n)},easeOut:function(e,n){return 1-g.easeIn(1-e,n)},easeInOut:function(e,n){return e<.5?g.easeIn(2*e,n)/2:1-g.easeIn(2*(1-e),n)/2},easeIn2:function(e){return g.easeIn(e,1.5)},easeOut2:function(e){return g.easeOut(e,1.5)},easeInOut2:function(e){return g.easeInOut(e,1.5)}},w=g,I=5e3,j=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=n.call(this,e)).init=function(e){var n=e.clientWidth,t=e.clientHeight,i=n>1200;r.scene.renderer=new p.WebGLRenderer({antialias:!i,alpha:!0}),r.scene.renderer.setClearColor(0,0),r.scene.renderer.setSize(n,t),r.scene.renderer.setPixelRatio(window.devicePixelRatio),r.scene.renderer.shadowMap.enabled=!0,r.scene.renderer.shadowMap.type=p.PCFSoftShadowMap,e.appendChild(r.scene.renderer.domElement),r.scene.camera=new p.PerspectiveCamera(75,n/t,.1,1e3),r.scene.controls=new b.a(r.scene.camera,r.scene.renderer.domElement),r.scene.controls.enabled=!1,r.scene.camera.position.z=-25,r.scene.controls.update(),r.scene.interaction=new v.a(r.scene.renderer,r.scene.scene,r.scene.camera),r.initUnits(),r.frameId||(r.frameId=requestAnimationFrame(r.animate))},r.dispose=function(){r.disposeUnits(),cancelAnimationFrame(r.frameId)},r.resize=function(e,n){r.scene.renderer&&r.scene.camera&&(r.scene.camera.aspect=e/n,r.scene.camera.updateProjectionMatrix(),r.scene.renderer.setSize(e,n),r.scene.renderer.setPixelRatio(window.devicePixelRatio))},r.animate=function(){r.scene.frameNumber=(r.scene.frameNumber+1)%I;var e=r.scene.renderer.domElement.getBoundingClientRect(),n=e.left,t=e.right,i=e.top,o=(e.bottom<0||i>r.scene.renderer.domElement.clientHeight||t<0||r.scene.renderer.domElement.clientWidth,r.scene),a=(o.composer,o.controls),s=o.units,c=(o.clock,o.renderer);Object.keys(s).forEach((function(e){return s[e].animate(Object(h.a)(Object(h.a)({THREE:p},r.scene),{},{input:r.scene.units.Controls,maxFrameNumber:I,react:r.props.react}))})),a.update(),c.render(r.scene.scene,r.scene.camera),r.frameId=window.requestAnimationFrame(r.animate)},r.initUnits=function(){var e=Object(h.a)(Object(h.a)({THREE:p},r.scene),{},{input:r.scene.units.Controls,maxFrameNumber:I,react:r.props.react});Object.keys(r.props.units).forEach((function(n){var t=r.props.units[n];!t.disabled^r.scene.unitsToggled&&(r.scene.units[n]=new t.unit(Object(h.a)(Object(h.a)({},e),t.args)),r.scene.units[n].init&&r.scene.units[n].init())}))},r.disposeUnits=function(){var e=r.scene,n=e.scene,t=e.units;for(Object.keys(t).forEach((function(e){return t[e].dispose()}));n.children.length>0;)n.remove(n.children[0])},r.toggleUnits=function(){r.disposeUnits(),r.scene.unitsToggled=!r.scene.unitsToggled,r.initUnits()},r.scene={renderer:void 0,camera:void 0,scene:new p.Scene,composer:void 0,controls:void 0,interaction:void 0,clock:new p.Clock,frameNumber:0,units:{},unitsToggled:!1,react:e.react},r}return t}(function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=n.call(this,e)).animateTransitions=function(){var e=[];r.transitions.forEach((function(n){if(n.currentFrame>=n.numberOfFrames)e.push(n);else{var t=n.currentFrame/n.numberOfFrames,r=w[n.timingFuntion]||function(e){return e};n.variable.copy(n.initialValue.clone().lerp(n.value,r(t))),n.currentFrame++}})),e.forEach((function(e){e.onComplete&&e.onComplete(),r.unregisterTransition(e.id)}))},r.registerTransition=function(e){return r.transitions.push({id:r.currentId=(r.currentId+1)%Number.MAX_SAFE_INTEGER,variable:e.variable,value:e.value.clone(),initialValue:e.variable.clone(),numberOfFrames:e.numberOfFrames||10,currentFrame:0,timingFuntion:e.timingFuntion||"none",onComplete:e.onComplete||function(){}}),r.currentId},r.unregisterTransition=function(e){var n=r.transitions.map((function(e){return e.id})).indexOf(e);-1!==n&&r.transitions.splice(n,1)},r.unregisterAllTransitions=function(){return r.transitions.length=0},r.noActiveTransitions=function(){return 0===r.transitions.length},r.transitions=[],r.currentId=0,r}return t}(O)),x=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(e){var i;return Object(c.a)(this,t),(i=n.call(this,e)).componentWillUnmount=function(){i.scene.dispose()},i.render=function(){return Object(r.jsx)("div",{className:"Viewer",ref:i.viewerRef})},i.state={},i.viewerRef=new o.a.createRef,i.scene=new j({react:{openDoor:function(e){return console.log("data")}},units:e.units}),i}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.resizeObs=new m.a(this.resize.bind(this)).observe(this.viewerRef.current),this.scene.init(this.viewerRef.current)}},{key:"resize",value:function(){var e=this.viewerRef.current;e&&this.scene.resize(e.clientWidth,e.clientHeight)}}]),t}(o.a.Component),F=t(9),T=t(24),C=t.n(T),E=t(11),y=t.n(E),M=t(12),Q=t(25),R=function(){var e=Object(M.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){return(new Q.a).load(n,(function(n){return e(n)}),(function(e){return console.log(e.loaded/e.total*100+"% loaded")}),(function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=n.call(this,e)).loadModel=function(){var e=Object(M.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(n.props.file);case 2:n.gtlf=e.sent,n.scene=n.gtlf.scene,n.props.scene.add(n.scene),n.onLoad&&n.onLoad();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.animate=function(e){},r.dispose=function(e){},r}return t}(O),k={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*Math.pow(e,2):(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeIn:function(e,n){return Math.pow(e,n)},easeOut:function(e,n){return 1-k.easeIn(1-e,n)},easeInOut:function(e,n){return e<.5?k.easeIn(2*e,n)/2:1-k.easeIn(2*(1-e),n)/2},easeIn2:function(e){return k.easeIn(e,1.5)},easeOut2:function(e){return k.easeOut(e,1.5)},easeInOut2:function(e){return k.easeInOut(e,1.5)}},D=k,A=function(e,n){var t,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"touchstart",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"touchend",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:200,s=!1,c=function(e){r=e.data.global.clone(),t=setTimeout((function(){return u()}),a),s=!0},u=function(){s=!1,clearTimeout(t)},l=function(e){s&&r&&r.sub(e.data.global).length()<.001&&n(),u()};e.on(i,c),e.on(o,l)},z=function(e){var n=new p.Quaternion;return n.setFromAxisAngle(new p.Vector3(0,1,0),e/180*Math.PI),n},N=[48,18,-18,-48],P=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=n.call(this,e)).rotateDoor=function(e){-1!==r.doorsTransitionIds[e.index]&&(r.unregisterTransition(r.doorsTransitionIds[e.index]),r.doorsTransitionIds[e.index]=-1),r.doorsTransitionIds[e.index]=r.registerTransition({variable:r.doors[e.index].quaternion,value:z(e.angle),numberOfFrames:e.frames,timingFuntion:"easeOutQuad",onComplete:e.onComplete})},r.setInitialRotationDoor=function(e){r.doors[e].quaternion.copy(z(N[e])),r.rotateDoor({index:e,angle:N[e]+(e>1?22:-22),frames:200})},r.onMouseOverDoor=function(e){return r.rotateDoor({index:e,angle:N[e]+(e>1?44:-44),frames:50})},r.onMouseOutDoor=function(e){return r.rotateDoor({index:e,angle:N[e]+(e>1?22:-22),frames:30})},r.clickDoor=function(e,n){return r.rotateDoor({index:e,angle:N[e]+(e>1?70:-70),frames:70,onComplete:n.react.openDoor(e)})},r.onLoad=function(){r.scene.scale.multiplyScalar(5.5),r.scene.position.add(new p.Vector3(0,-15,20)),r.scene.rotation.y+=Math.PI,r.room=r.scene.children[0],r.walls=r.scene.children[1],r.logo=r.scene.children[2],r.room.castShadow=!0,r.room.receiveShadow=!0,r.walls.castShadow=!0,r.walls.receiveShadow=!0,r.doors=[],r.doorsTransitionIds=[-1,-1,-1,-1],r.scene.children.slice(3).forEach((function(e){return r.doors.unshift(e)})),r.doors.forEach((function(e,n){r.setInitialRotationDoor(n),e.castShadow=!0,e.receiveShadow=!0,e.cursor="pointer",A(e,(function(){return r.clickDoor(n,r.props)})),A(e,(function(){return r.clickDoor(n,r.props)}),"mousedown","mouseup"),e.on("mouseover",(function(){return r.onMouseOverDoor(n)})),e.on("mouseout",(function(){return r.onMouseOutDoor(n)}))}))},r.animate=function(e){r.animateTransitions()},r.dispose=function(e){},r.loadModel(Object(F.a)(r)),r}return t}(C()(S,(function e(n){var t=this;Object(c.a)(this,e),this.animateTransitions=function(){var e=[];t.transitions.forEach((function(n){if(n.currentFrame>=n.numberOfFrames)e.push(n);else{var t=n.currentFrame/n.numberOfFrames,r=D[n.timingFuntion]||function(e){return e};n.variable.slerp?n.variable.copy(n.initialValue.clone().slerp(n.value,r(t))):n.variable.copy(n.initialValue.clone().lerp(n.value,r(t))),n.currentFrame++}})),e.forEach((function(e){e.onComplete&&e.onComplete(),t.unregisterTransition(e.id)}))},this.registerTransition=function(e){return t.transitions.push({id:t.currentId=(t.currentId+1)%Number.MAX_SAFE_INTEGER,variable:e.variable,value:e.value.clone(),initialValue:e.variable.clone(),numberOfFrames:e.numberOfFrames||10,currentFrame:0,timingFuntion:e.timingFuntion||"none",onComplete:e.onComplete||function(){}}),t.currentId},this.unregisterTransition=function(e){var n=t.transitions.map((function(e){return e.id})).indexOf(e);-1!==n&&t.transitions.splice(n,1)},this.unregisterAllTransitions=function(){return t.transitions.length=0},this.noActiveTransitions=function(){return 0===t.transitions.length},this.transitions=[],this.currentId=0}))),U=[{color:255,x:23,z:13.8},{color:65280,x:11,z:25},{color:11141205,x:-11,z:25},{color:11184640,x:-23,z:13.8}],V=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(e){var r;Object(c.a)(this,t),(r=n.call(this,e)).animate=function(e){},r.dispose=function(){};var i=e.scene,o=e.THREE;return r.light0=new o.HemisphereLight(16777215,4473924,1.35),r.light0.position.set(0,3,0),i.add(r.light0),r.lights=[],U.forEach((function(e,n){r.lights.push(new o.SpotLight(e.color,16777215,35));var t=r.lights[n];t.position.set(e.x,-12.5,e.z),t.castShadow=!0,t.decay=12,i.add(t),t.shadow.mapSize.width=512,t.shadow.mapSize.height=512,t.shadow.camera.near=.5,t.shadow.camera.far=500})),r}return t}(O),H=t.p+"static/media/scene.8a53f2ea.glb",W=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(c.a)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(x,{id:"sceneClosed",units:{head:{unit:P,args:{file:H},disabled:!1},lights:{unit:V,disabled:!1}}})},e}return t}(o.a.Component),L=(t(45),function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(c.a)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).state={},e.render=function(){return Object(r.jsx)(f.a,{children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(W,{})})})},e}return t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(L,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.dc7f756d.chunk.js.map